<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <title><?=$title?> - <?=$comp?></title>
    <link rel="apple-touch-icon" href="<?=base_url()?>static/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="<?=base_url()?>static/app-assets/images/ico/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Muli:300,300i,400,400i,600,600i,700,700i%7CComfortaa:300,400,700" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/charts/chartist.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/charts/chartist-plugin-tooltip.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/file-uploaders/dropzone.min.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/forms/icheck/icheck.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/forms/icheck/custom.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/timeline/vertical-timeline.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/forms/toggle/switchery.min.css">
    <!-- <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/tables/datatable/datatables.min.css"> -->
    <!-- BEGIN:  fullcalendar  -->
    <!-- <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/calendars/fullcalendar.min.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/plugins/calendars/fullcalendar.css"> -->
    <!-- END:  fullcalendar  -->

    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/components.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/extensions/toastr.css">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/core/menu/menu-types/vertical-menu-modern.css">

    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/fonts/simple-line-icons/style.css">

    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/pages/timeline.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/plugins/file-uploaders/dropzone.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/pages/dashboard-ecommerce.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/vendors/css/forms/selects/select2.min.css">
    <!-- END: Page CSS-->
    <!-- image -->

    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/core/colors/palette-gradient.css">
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/app-assets/css/pages/gallery.css">
    .

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="<?=base_url()?>static/assets/css/style.css">
    <!-- END: Custom CSS-->

    <!-- BEGIN: Vendor JS-->
    <script src="<?=base_url()?>static/app-assets/vendors/js/vendors.min.js" type="text/javascript"></script>
    <!-- BEGIN Vendor JS-->
</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout vertical-menu-modern 2-columns   fixed-navbar" data-open="click" data-menu="vertical-menu-modern" data-color="bg-gradient-x-purple-red" data-col="2-columns" style="opacity: 0.7;">

<style type="text/css">
.pagination {
    margin-top:0; 
    float: right;
}
.dataTables_filter{
    text-align: right;
}
.ajaxloder {
    visibility: visible;
    position: fixed;
    z-index: 99999999;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    width: 85px;
    height: 85px;
    margin: auto;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 50 50'%3E%3Cpath d='M28.43 6.378C18.27 4.586 8.58 11.37 6.788 21.533c-1.791 10.161 4.994 19.851 15.155 21.643l.707-4.006C14.7 37.768 9.392 30.189 10.794 22.24c1.401-7.95 8.981-13.258 16.93-11.856l.707-4.006z'%3E%3CanimateTransform attributeType='xml' attributeName='transform' type='rotate' from='0 25 25' to='360 25 25' dur='0.6s' repeatCount='indefinite'/%3E%3C/path%3E%3C/svg%3E") center / contain no-repeat;
}
.changeStatus,.changeStatusDispaly{
    font-size: 20px;
    font-weight: bolder;
    cursor: pointer;
}
.changeStatus .icon-close, .changeStatusDispaly .icon-close{
    color: red;
}
.changeStatus .la-check-circle, .changeStatusDispaly .la-check-circle{
    color: green;
}
.change-indexing{
    width: 60px;
}
.btn-sm{
    float: left;
}
.btn-tb-f{
    width: 300px;
    float: left;
    margin-left: 15px;
}
.modal-body {
    max-height: 77vh;
    overflow-x: hidden;
    overflow-y: scroll;
}
/* width */
.modal-body::-webkit-scrollbar {
  width: 5px;
}

/* Track */
.modal-body::-webkit-scrollbar-track {
  background: #f1f1f1; 
}
 
/* Handle */
.modal-body::-webkit-scrollbar-thumb {
  background: #888; 
}

/* Handle on hover */
.modal-body::-webkit-scrollbar-thumb:hover {
  background: #555; 
}

input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type=number] {
        -moz-appearance: textfield;
        /* Firefox */
      }


  .rating {
    display: flex;
    flex-direction: row-reverse;
    justify-content: right;
    margin-top: -35px;
}

.rating>input {
    display: none
}

.rating>label {
    position: relative;
    width: 1em;
    font-size: 3vw;
    color: var(--warning);
    cursor: pointer
}

.rating>label::before {
    content: "\2605";
    position: absolute;
    opacity: 0
}

.rating>label:hover:before,
.rating>label:hover~label:before {
    opacity: 1 !important
}

.rating>input:checked~label:before {
    opacity: 1
}

.rating:hover>input:checked~label:before {
    opacity: 0.4
}


/**/
.border-none{
    border: none!important;
}
.m-sm{
    margin: 2px;
}
.icons { 
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}
.icons + img {
  cursor: pointer;
  width: 60px;
  max-height: 60px;
}
.icons:checked + img {
  outline: 2px solid #f00;
}
    .pag-link{
    width: 46px;
    height: 20px;
    margin: 5px;
    padding: 5px;
    background: #eeeeee;
    border: 1px solid;
    border-radius: 2px;
}
/*website properties*/

table ol {
    padding-left: 5px;
}
table ol li{
    list-style: decimal;
}
table ol li::marker{
    margin-right: 10px;
}

#propList{
    height: 350px;
    overflow-y: scroll;
}
    /* width */
#propList::-webkit-scrollbar {
  width: 10px;
}

/* Track */
#propList::-webkit-scrollbar-track {
  background: #f1f1f1; 
}
 
/* Handle */
#propList::-webkit-scrollbar-thumb {
  background: #888; 
}

/* Handle on hover */
#propList::-webkit-scrollbar-thumb:hover {
  background: #555; 
}
#selected_flats{
    float: left;
    border: 1px solid gray;
    border-radius: 3px;
    min-height: 50px;
    width: 100%;
}
#selected_flats span {
    border: 1px solid #7b7a7a;
    padding: 4px 5px;
    margin: 3px;
    background: var(--primary);
    color: var(--white);
    display: block;
    width: fit-content;
    float: left;
}

#selected_flats span i{
    font-size: 90%;
    color: var(--danger);
    font-weight: bolder;
    cursor: pointer;
}
ul li label {
    cursor: pointer!important;
}
/*website properties*/



.filter{
    width: 30%;
    height: 30px;
}
.icon-sm{
    max-width: 60px;
    max-height: 60px;
}
.image-sm{
    max-width: 120px;
    max-height: 120px;
}
.img-md{
    max-width: 280px;
    max-height: 280px;
}
.switchery[data-size="sm"]{
    height: 17px;
    width: 17px;
}
.inline-block{
    display: inline-block!important;
}
tbody tr.checked{
    background-color: #e5e7e8!important;
}

</style>
    <div class="ajaxloder"></div>
    <?php
    load_view('header');
    load_view('main_menu');
    load_view($contant);
    load_view('footer');
    ?>
    


   

<div class="modal fade text-left" id="showModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel21" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h4 class="modal-title" id="myModalLabel21">......</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              
          </div>
          <!-- <div class="modal-footer">
              <button type="button" class="btn grey btn-secondary" data-dismiss="modal">Close</button>
          </div> -->
      </div>
  </div>
</div>
<style type="text/css">
    .zoom-img{
        cursor: zoom-in;
    }
    .zoom-out-img{
        cursor: zoom-out;
    }
    .full-img{
        position: fixed;
        height: 100vh;
        width: 100vw;
        background: #00000047;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 9999999;
        display: none;
        /*transform: translate(-50%, -50%);*/
       
    }
    .blur-bg{
        /*background: red;*/
        height: 100vh;
        width: 100vw;
        position: absolute;
        z-index: 999999;
        filter: blur(20px);
        -webkit-filter: blur(20px);
        background-repeat: no-repeat;
        background-size: cover;
        opacity: .2;
    }
    .full-img .image{
        position: relative;
        display: table-cell;
        vertical-align: middle;
        text-align: center;
        z-index: 9999999;
    }
    .full-img .image img{
        max-width: 100vw;
        height: auto;
        max-height: 100vh;
    }
</style>

<div class="full-img zoom-out-img">
    <div class="blur-bg"></div>
    <div class="image">
        <img src="http://localhost/mrs/public/uploads/property-images/6df18dead3868f8abacf8d271c166903.jpg" >
    </div>
</div>
<script type="text/javascript">
    $(document).on('click','.zoom-img',function(event) {
        var img = $(this).attr('src');
        console.log(img);
        $('.full-img').css('display','table');
        $('.full-img .image img').attr('src',img);
        $('.blur-bg').css('background-image','url('+img+')');
    })

    $(document).on('click','.zoom-out-img',function(event) {
        $('.full-img').css('display','none');
        $('.full-img .image img').attr('src','');
    })
</script>



    

    <!-- BEGIN: Page Vendor JS-->
    <script src="<?=base_url()?>static/app-assets/vendors/js/charts/chartist.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/charts/chartist-plugin-tooltip.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/timeline/horizontal-timeline.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/extensions/dropzone.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/forms/icheck/icheck.min.js" type="text/javascript"></script>
    <!-- END: Page Vendor JS-->

    <!-- BEGIN: Theme JS-->
    <script src="<?=base_url()?>static/app-assets/js/core/app-menu.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/js/core/app.js" type="text/javascript"></script>
    <!-- END: Theme JS-->

    <script src="<?=base_url()?>static/app-assets/js/scripts/pages/dashboard-ecommerce.js" type="text/javascript"></script>

    <script src="<?=base_url()?>static/app-assets/js/scripts/modal/components-modal.js" type="text/javascript"></script>
    <input type="hidden" name="tb" value="<?=$tb_url?>">
    <!-- END: Page JS-->

    <!-- for images -->
    <script src="<?=base_url()?>static/app-assets/vendors/js/gallery/masonry/masonry.pkgd.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/gallery/photo-swipe/photoswipe.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/gallery/photo-swipe/photoswipe-ui-default.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/js/scripts/gallery/photo-swipe/photoswipe-script.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/js/scripts/gallery/photo-swipe/photoswipe-script.js" type="text/javascript"></script>


    <script src="<?=base_url()?>static/app-assets/vendors/js/extensions/toastr.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/js/scripts/extensions/toastr.js" type="text/javascript"></script>


    <script src="<?=base_url()?>static/app-assets/vendors/js/extensions/sweetalert2.all.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/js/scripts/extensions/sweet-alerts.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/forms/toggle/switchery.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/forms/select/select2.full.min.js" type="text/javascript"></script>
     <script src="<?=base_url()?>static/app-assets/js/scripts/forms/select/form-select2.js" type="text/javascript"></script>

    <!-- BEGIN:  fullcalendar  -->
    <!-- <script src="<?=base_url()?>static/app-assets/vendors/js/extensions/moment.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/vendors/js/extensions/fullcalendar.min.js" type="text/javascript"></script>
    <script src="<?=base_url()?>static/app-assets/js/scripts/extensions/fullcalendar.js" type="text/javascript"></script> -->
    <!-- END:  fullcalendar  -->
    <!-- for images -->
    





    <script type="text/javascript">
        

        function loadtb(url=null){
            if (url!=null) {
                var tbUrl = url;
            }
            else{
                var tbUrl = $('[name="tb"]').val();
            }
            
            if (tbUrl!='') {
                $('#tb').load(tbUrl);
            }
        }

        loadtb();

        function url_content(url){
            $.post(url,function(data) {
                return data;
            })
        }

        $(document).on('click', '.pag-link', function(event){
            document.body.scrollTop = 0; 
            document.documentElement.scrollTop = 0;
            var search = $('#tb-search').val();
            $.post($(this).attr('href'),{search:search})
            .done(function(data){
                $('#tb').html(data);
            })
            return false;
        })

        var timer;
        var timeout = 500;
        $(document).on('keyup', '#tb-search', function(event){
            clearTimeout(timer);
            timer = setTimeout(function(){
                var search  = $('#tb-search').val();
                // console.log(search);
                var tbUrl = $('[name="tb"]').val();
                $.post(tbUrl,{search:search})
                .done(function(data){
                    $('#tb').html(data);
                })
            }, timeout);

            return false;
        })

// $(document).ready(function(){
//   $("#myInput").on("keyup", function() {
//     var value = $(this).val().toLowerCase();
//     $("#myTable tr").filter(function() {
//       $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
//     });
//   });
// }); 

$(document).on('keyup change','.static-tb-search',function(event) {
     var value = $(this).val().toLowerCase();
     var tbtarget  = $(this).attr('tbtarget');
     $(tbtarget+" tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
})

$(document).on('submit','.dynamic-tb-search',function(event) {
    $this = $(this);

    $.ajax({
      url: $this.attr("action"),
      type: $this.attr("method"),
      data:  new FormData(this),
      processData: false,
      contentType: false,
      success: function(data){
        console.log(data);
        // return false;
        // data = JSON.parse(data);
        $($this.attr("tagret-tb")).html(data);
        
        // alert_toastr(data.res,data.msg);
      }
    })
    return false;
})

var timer;
$(document).on('input','.sumbit-input',function (event) {
    clearInterval(timer);
    t = $(this);
    timer = setTimeout(function() {
        $(t.attr('tagret-form')).submit();
    }, 1000);
})
$(document).on('change','.sumbit-change',function (event) {
     t = $(this);
    $(t.attr('tagret-form')).submit();
})



        


        $ajaxloder = $('.ajaxloder');
        $body = $('body');
            $(document).on({
            ajaxStart: function() { 
                $ajaxloder.css('visibility','visible');
                // $body.css('opacity','0.7');

                // setTimeout(function() {
                //     $ajaxloder.css('visibility','hidden'); 
                //     // $body.css('opacity','1');
                // }, 5000);
            },
             ajaxStop: function() { 
                 setTimeout(function() {
                    $ajaxloder.css('visibility','hidden'); 
                    // $body.css('opacity','1');
                }, 250);
            }    
        });
        loder();
        function loder() {
            $ajaxloder.css('visibility','hidden'); 
            $body.css('opacity','1');
        };

        $('[data-action="reload"]').click(function(){
            loadtb();
        })


        function changeStatus(e) {
            var t = $(e).parent();
            var data =  $(e).attr('data');
            var value =  $(e).attr('value');
            if($(e).attr('column')) {
                var column =  $(e).attr('column');
                var url    = '<?=base_url()?>changeStatus/'+column;
            } else {
                var url    = '<?=base_url()?>changeStatus';
            }

            $.post(url,{data:data,value:value})
             .done(function(data){
                    t.html(data);
                })
                .fail(function() {
                    alert_toastr("error","error");
                  })
        }

        $(document).on('click','[data-toggle="change-status"]', function(event) {
            var t = $(this).parent();
            var data =  $(this).attr('data');
            var value =  $(this).attr('value');
             $.post('<?=base_url()?>change_status/',{data:data,value:value})
             .done(function(data){
                    console.log(data);

                    t.html(data);
                })
            .fail(function() {
                alert_toastr("error","error");
              })
        })
        var timer;
        $(document).on('input','.change-indexing',function (event) {
            clearInterval(timer);
            t = $(this);
            timer = setTimeout(function() {
                var data =  t.attr('data');
                var value = t.val();
                 $.post('<?=base_url()?>changeIndexing/',{data:data,value:value})
                 .done(function() {
                    alert_toastr("success","Saved.");
                 })
                .fail(function() {
                    alert_toastr("error","error");
                  })
            }, 1000);
        })
        // indexing
          $(document).on('click','.change-indexing-left',function(event) {
                  var t = $(this);
                  var input = t.siblings('.change-indexing');
                  var indexing = parseInt(input.val())+1;
                  input.val(indexing);
                  changeIndexing(t);
              })

              $(document).on('click','.change-indexing-right',function(event) {
                  var t = $(this);
                  var input = t.siblings('.change-indexing');
                  var indexing = parseInt(input.val())-1;
                  if (indexing<0) {
                    var indexing = 0;
                  }
                  input.val(indexing);
                  changeIndexing(t);
              })

              function changeIndexing(t) {
                
                  clearInterval(timer);
                  timer = setTimeout(function() {
                      var input = t.siblings('.change-indexing');
                      var data =  input.attr('data');
                      var value = input.val();
                       $.post('<?=base_url()?>changeIndexing/',{data:data,value:value})
                       .done(function() {
                          alert_toastr("success","Saved.");
                       })
                      .fail(function() {
                          alert_toastr("error","error");
                        })
                  }, 1000); 
              }
        // indexing


        // $( document ).ready(function() {
        //     $('.changeStatus').click(function(e) {
        //         var t = $(this).parent();
        //         var data =  $(this).attr('data');
        //         var value =  $(this).attr('value');
        //         $.post('<?=base_url()?>changeStatus',{data:data,value:value})
        //         .done(function(data){
                    
        //             // data = JSON.parse(data);
        //             // console.log(data);
        //             t.html(data);
        //         })
        //         .fail(function() {
        //             alert( "error" );
        //           })
        //     })
        // });

            $(document).on("submit", '.ajaxsubmit', function(event) { 
                event.preventDefault();
                $this = $(this);
                $.ajax({
                  url: $this.attr("action"),
                  type: $this.attr("method"),
                  data:  new FormData(this),
                  cache: false,
                  contentType: false,
                  processData: false,
                  success: function(data){
                    console.log(data);
                    // return false;
                    data = JSON.parse(data);
                    
                    if (data.res=='success') {
                        if(!$this.hasClass("update-form")){
                            $('[type="reset"]').click();
                        }
                        
                        if ($this.hasClass("reload-tb")) {
                            loadtb();
                        }

                        if ($this.hasClass("reload-page")) {
                            setTimeout(function() {
                                window.location.reload();
                            }, 1000);
                            
                        }

                    }
                    alert_toastr(data.res,data.msg);
                  }
                })
                return false;
            })

        $(document).on('click','[data-toggle="show-hide"]', function(event){
            var dataTarget = $(this).attr('data-target');
            $('.show-'+dataTarget).toggle(100);
            $('.hide-'+dataTarget).toggle(100);
        })

        $(document).on('click','.changeStatusDispaly', function(){
            $this = $(this);
            var t = $this.parent();
            var data =  $this.attr('data');
            var value =  $this.attr('value');
            var url    = '<?=base_url()?>changeStatusDispaly';
            $.post(url,{data:data,value:value})
             .done(function(data){
                    t.html(data);
                })
             .fail(function() {
                    alert_toastr("error","error");
                })
        })


        $('#showModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget) 
            var recipient = button.data('whatever') 
            var data_url  = button.data('url') 
            var modal = $(this)
            $('#showModal .modal-title').text(recipient)
            $('#showModal .modal-body').load(data_url);
        })

   
        function _duplicate(e){
            var r = confirm("You want to duplicate ? ");
            if (r == true) {
              var $this = $(e);
                url = $this.attr('url');
                $.post(url,function(data){
                    data = JSON.parse(data);
                    console.log(data);
                    if (data.res=='success') {
                        loadtb();
                    }
                    alert_toastr(data.res,data.msg);
                })
                return false;
            } 
        }



        function _delete(e){
            
                Swal.fire({
                  toast:true,
                  type: 'warning',
                  title: 'You want to delete ?',
                  timer:3000,
                  showConfirmButton: true,
                  showCancelButton: true,
                  confirmButtonText: `Yes`,
                  cancelButtonText: `No`,
                }).then((result) => {
                    var $this = $(e);
                    url = $this.attr('url');
                    if(result.value==true){
                    $.post(url,function(data){
                        data = JSON.parse(data);
                        if (data.res=='success') {
                            $this.parent().parent().remove();
                        }
                        alert_toastr(data.res,data.msg);
                    })
                    }
                }).catch(swal.noop);
            return false;
          }


$(document).on('change','#uploadimg', function(event) {
    $('#uploadfiles').submit();
})

$(document).on('submit','#uploadfiles', function(event) {
    event.preventDefault();
    $this = $(this);
    $.ajax({
      url: $this.attr("action"),
      type: $this.attr("method"),
      data:  new FormData(this),
      cache: false,
      contentType: false,
      processData: false,
      success: function(data) {
        console.log(data);
        data = JSON.parse(data);
        
        if (data.res=='success') {
          reset_modal();
          $this[0].reset();
        }
        alert_toastr(data.res,data.msg);
      }

    });
  return false;
})

$(document).on('click','[data-toggle="copy"]',function(event) {
    var text = $(this).attr('data-target');
   var temp = $("<textarea></textarea>");
      $("body").append(temp);
      temp.val(text).select();
    if(document.execCommand("copy")){
      alert_toastr('success','copied to clipboard');
    }
    else{
      alert_toastr('error','copy to clipboard failed');
    }
    temp.remove();
})


// website properties
$(document).on('change','[name="properties"]',function(event) {
    $('.flat .collapse').fadeOut(10);
    $('[name="properties"]').not(this).prop('checked', false);  
    var propid = $(this).val();
    if(event.currentTarget.checked){
        $('.flat .pro-'+propid).fadeIn(100);
    }
})

$(document).on('change','[name="flat_ids[]"]',function(event) {

    var flat_id = $(this).val();
    var flat_name = $(this).parent().text();
    console.log(flat_id);
    console.log(flat_name);
    if(event.currentTarget.checked){
        var button = '<span class="sflat" id="'+flat_id+'">'+flat_name+' <i class="la la-close"></i></span>';
        $('#selected_flats').append(button);
        $('#flat_idsss').val($('#flat_idsss').val()+','+flat_id+',');
    }
    else{
      $('#selected_flats #'+flat_id).remove();  
      var flat_idsss = $('#flat_idsss').val();
      var flat_idsss = flat_idsss.replace(flat_id+',','');
      $('#flat_idsss').val(flat_idsss);
    }
})

$(document).on('click','.sflat i',function(event) {
    var id = $(this).parent().attr('id');
    console.log(id);
    // console.log(flat_name);
    $('[name="flat_ids[]"][value="'+id+'"] ').prop('checked', false);
    $(this).parent().fadeOut();
    var flat_idsss = $('#flat_idsss').val();
    var flat_idsss = flat_idsss.replace(id+',','');
    $('#flat_idsss').val(flat_idsss);
    // var id = $(this).parent().attr('id');
})

// $(document).ready(function(){
//   $("#propInput").on("keyup", function() {
//     var value = $(this).val().toLowerCase();
//     $("#propList li").filter(function() {
//       $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
//     });
//   });
// });


// website properties
$(document).on('click','.js-click',function(event) {
    var $this = $(this);
    url = $this.attr('href');
    $.post(url,function(data){
        console.log(data);
        data = JSON.parse(data);
        alert_toastr(data.res,data.msg);
        if (data.res=='success') {
          if ($this.hasClass('tb-reload')) {
            loadtb();
          }
          if ($this.hasClass('load')) {
              var data_target = $this.attr('data-target');
              console.log(data_target);
              $(data_target).html(data.content);
          }
        }
    })
    return false;
})






         // function _delete(e){
         //    var r = confirm("You want to delete ? ");
         //    if (r == true) {
         //        var $this = $(e);
         //        url = $this.attr('url');
         //        $.post(url,function(data){
         //            data = JSON.parse(data);
         //            console.log(data);
         //            if (data.res=='success') {
         //                $this.parent().parent().remove();
         //            }
         //            alert_toastr(data.res,data.msg);
         //        })
         //        return false;
         //    }
         //  }

    </script>
</body>
<!-- END: Body-->

</html>